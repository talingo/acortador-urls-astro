import{a as i}from"./index.CW0uNVXs.js";import{A as d}from"./_astro-entry_sonner.D8te0avd.js";var f={exports:{}},c={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y=i,R=Symbol.for("react.element"),b=Symbol.for("react.fragment"),x=Object.prototype.hasOwnProperty,v=y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_={key:!0,ref:!0,__self:!0,__source:!0};function m(o,r,a){var e,t={},n=null,l=null;a!==void 0&&(n=""+a),r.key!==void 0&&(n=""+r.key),r.ref!==void 0&&(l=r.ref);for(e in r)x.call(r,e)&&!_.hasOwnProperty(e)&&(t[e]=r[e]);if(o&&o.defaultProps)for(e in r=o.defaultProps,r)t[e]===void 0&&(t[e]=r[e]);return{$$typeof:R,type:o,key:n,ref:l,props:t,_owner:v.current}}c.Fragment=b;c.jsx=m;c.jsxs=m;f.exports=c;var s=f.exports;function U(o){return/^(ftp|http|https):\/\/[^ "]+\.[a-zA-Z]{2,}(\/\S*)?$/.test(o)}function O({userId:o}){const[r,a]=i.useState(),[e,t]=i.useState(),n=i.useRef(null),l=async u=>{if(u.preventDefault(),!r){t("Debes escribir una URL");return}if(!U(r)){t("Debes escribir una URL válida");return}try{const p=(await(await fetch("/api/shorter-url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:r,userId:o??null})})).json()).shortenedUrl;if(!p){t("Error al acortar la URL, inténtalo de nuevo más tarde");return}n.current.value=p,t(void 0)}catch{t("Error al acortar la URL, inténtalo de nuevo más tarde")}},h=()=>{try{window.navigator.clipboard.writeText(n.current.value),d.success("URL copiada al portapapeles")}catch{d.error("Error al copiar la URL")}};return s.jsxs("form",{onSubmit:l,id:"shorter-url-form",children:[e&&s.jsx("span",{className:"shorter-url-form-error",children:e}),s.jsx("input",{className:"shorter-url-form-input",type:"url",placeholder:"Escribe aquí tu URL",defaultValue:r,onChange:u=>a(u.target.value)}),s.jsx("button",{className:"shorter-url-form-button",type:"submit",children:"Acortar URL"}),s.jsx("input",{ref:n,className:"shorter-url-form-input",disabled:!0,type:"url"}),s.jsx("button",{onClick:h,className:"shorter-url-form-button",type:"button",children:"Copiar URL"})]})}export{O as default};
